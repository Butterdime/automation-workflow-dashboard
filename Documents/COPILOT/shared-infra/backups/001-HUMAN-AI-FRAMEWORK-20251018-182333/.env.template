# Shared Infrastructure Environment Template
# Universal configuration for all Perplexity spaces
# Copy this to .env and customize for your specific space

# ================================
# SPACE CONFIGURATION
# ================================

# Your Perplexity space name (REQUIRED)
SPACE_NAME=your-space-name-here

# Space-specific subdomain for tunnel
TUNNEL_SUBDOMAIN=${SPACE_NAME}

# ================================
# COPILOT AGENT CONFIGURATION
# ================================

# OpenAI API Configuration
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=2048
OPENAI_TEMPERATURE=0.7

# Copilot Agent Server
COPILOT_PORT=4000
COPILOT_HOST=localhost

# ================================
# WEBHOOK MULTIPLEXER
# ================================

# Webhook server port
WEBHOOK_PORT=3000

# Slack Integration (optional)
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token
SLACK_SIGNING_SECRET=your-slack-signing-secret
SLACK_CHANNEL_ID=your-default-channel-id

# ================================
# TUNNEL CONFIGURATION
# ================================

# Ngrok authentication
NGROK_AUTH_TOKEN=your-ngrok-auth-token

# Tunnel URL (auto-populated by tunnel setup)
TUNNEL_URL=

# Tunnel region (optional)
NGROK_REGION=us

# ================================
# GOOGLE CLOUD & FIREBASE
# ================================

# Firebase Configuration (optional)
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_API_KEY=your-firebase-api-key
FIREBASE_DATABASE_URL=https://your-project.firebaseio.com
FIREBASE_STORAGE_BUCKET=your-project.appspot.com

# Google Cloud Firestore (optional)
GOOGLE_CLOUD_PROJECT_ID=your-gcp-project-id
GOOGLE_APPLICATION_CREDENTIALS=path/to/service-account.json

# ================================
# DATABASE CONFIGURATION
# ================================

# SQLite database path (for local storage)
DATABASE_PATH=./data/copilot.db

# Redis (optional, for caching)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=

# ================================
# LOGGING & MONITORING
# ================================

# Log level (DEBUG, INFO, WARN, ERROR)
LOG_LEVEL=INFO

# Log file paths
LOG_FILE=./logs/copilot.log
ACCESS_LOG_FILE=./logs/access.log
ERROR_LOG_FILE=./logs/error.log

# Log retention (days)
LOG_RETENTION_DAYS=30

# ================================
# SECURITY CONFIGURATION
# ================================

# JWT Secret for authentication (generate a strong random string)
JWT_SECRET=your-jwt-secret-here

# API Key for internal services
INTERNAL_API_KEY=your-internal-api-key

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ================================
# DEVELOPMENT SETTINGS
# ================================

# Environment mode
NODE_ENV=development

# Enable debug mode
DEBUG=true

# Auto-restart on changes
WATCH_FILES=true

# ================================
# CI/CD CONFIGURATION
# ================================

# GitHub repository (for CI/CD)
GITHUB_REPOSITORY=your-username/your-repo
GITHUB_TOKEN=your-github-token

# Deployment target
DEPLOY_TARGET=production
DEPLOY_BRANCH=main

# Health check endpoint
HEALTH_CHECK_URL=http://localhost:4000/health

# ================================
# PERFORMANCE TUNING
# ================================

# Request timeout (milliseconds)
REQUEST_TIMEOUT=30000

# Connection pool sizes
MAX_CONNECTIONS=100
POOL_SIZE=10

# Cache settings
CACHE_TTL=3600
CACHE_SIZE_MB=256

# ================================
# WEBHOOK VALIDATION
# ================================

# Webhook signature validation
WEBHOOK_SECRET=your-webhook-secret
WEBHOOK_VALIDATION_ENABLED=true

# ================================
# SPACE-SPECIFIC OVERRIDES
# ================================

# Override any above settings for specific spaces
# Example: SPACE_SPECIFIC_OPENAI_MODEL=gpt-4
# These will be applied automatically based on SPACE_NAME

# ================================
# OPTIONAL INTEGRATIONS
# ================================

# Discord Bot (optional)
DISCORD_BOT_TOKEN=your-discord-bot-token
DISCORD_CLIENT_ID=your-discord-client-id

# Microsoft Teams (optional)
TEAMS_APP_ID=your-teams-app-id
TEAMS_APP_PASSWORD=your-teams-app-password

# Email notifications (optional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# ================================
# BACKUP & RECOVERY
# ================================

# Backup configuration
BACKUP_ENABLED=true
BACKUP_INTERVAL=daily
BACKUP_RETENTION=7
BACKUP_STORAGE=./backups

# ================================
# EXPERIMENTAL FEATURES
# ================================

# Enable experimental features
EXPERIMENTAL_FEATURES=false
BETA_TESTING=false

# Feature flags
FEATURE_ADVANCED_ANALYTICS=false
FEATURE_REAL_TIME_SYNC=false
FEATURE_AI_TRAINING=false

# ================================
# NOTES
# ================================

# 1. Replace all placeholder values with actual configuration
# 2. Keep sensitive values secure and never commit them to version control
# 3. Use different .env files for different environments (dev, staging, prod)
# 4. Some features are optional and can be left empty if not needed
# 5. The SPACE_NAME variable is used for space isolation and must be unique
# 6. Tunnel setup will automatically populate TUNNEL_URL when established